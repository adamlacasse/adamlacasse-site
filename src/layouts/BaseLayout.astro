---
import { Image } from 'astro:assets';
import { AUTHOR, SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import logo from '../assets/lacasse-solutions.png';

interface Props {
  title?: string;
  description?: string;
  ogTitle?: string;
  ogDescription?: string;
  ogImage?: string;
  canonicalURL?: string;
  contentWidth?: 'wide' | 'narrow';
}

const {
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  ogTitle,
  ogDescription,
  ogImage,
  canonicalURL: canonicalOverride,
  contentWidth = 'wide',
} = Astro.props as Props;

const siteBase = Astro.site ?? new URL('/', 'http://localhost');
const canonicalURL = (canonicalOverride ?? new URL(Astro.url.pathname, siteBase)).toString();
const siteUrl = new URL(canonicalURL);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={siteUrl.toString()} />
    <meta property="og:title" content={ogTitle || title} />
    <meta property="og:description" content={ogDescription || description} />
    {ogImage && <meta property="og:image" content={new URL(ogImage, Astro.site).toString()} />}

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={siteUrl.toString()} />
    <meta property="twitter:title" content={ogTitle || title} />
    <meta property="twitter:description" content={ogDescription || description} />
    {ogImage && <meta property="twitter:image" content={new URL(ogImage, Astro.site).toString()} />}

    <meta name="color-scheme" content="light dark" />
    <link rel="icon" href="/pc.ico" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css" />
  </head>

  <body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
      <div class="container">
        <div class="navbar-brand">
          <a href="/" class="navbar-item">
            <Image src={logo} alt={AUTHOR} width={120} height={120} />
          </a>
        </div>
        <div class="navbar-menu">
          <div class="navbar-end">
            <a class="navbar-item" href="/about">About</a>
            <a class="navbar-item" href="/now">Now</a>
            <a class="navbar-item" href="/projects">Projects</a>
            <a class="navbar-item" href="/blog">Writing</a>
            <a class="navbar-item" href="/contact">Contact</a>
          </div>
        </div>
      </div>
    </nav>

    <main class="section">
      <div class="container">
        {
          contentWidth === 'narrow' ? (
            <div class="content" style="max-width: 75ch; margin: 0 auto;">
              <slot />
            </div>
          ) : (
            <div class="content">
              <slot />
            </div>
          )
        }
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="content has-text-centered">
          <p>
            <small>© {new Date().getFullYear()} {AUTHOR}</small>
          </p>
          <p>
            <small>
              <a
                href="https://github.com/adamlacasse"
                target="_blank"
                rel="noreferrer"
                aria-label="GitHub profile"
              >
                GitHub
              </a>
              {' · '}
              <a
                href="https://www.linkedin.com/in/adamlacasse/"
                target="_blank"
                rel="noreferrer"
                aria-label="LinkedIn profile"
              >
                LinkedIn
              </a>
              {' · '}
              <a href="/rss.xml" aria-label="RSS feed"> RSS </a>
            </small>
          </p>
        </div>
      </div>
    </footer>
  </body>
</html>
